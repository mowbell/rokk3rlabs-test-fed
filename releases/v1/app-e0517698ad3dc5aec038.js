webpackJsonp([0],{123:function(e,t){},124:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=a(r);n(4);var i=n(180),o=n(184),l=a(o),u=n(183),c=s.default.module("app.dashboard",["chart.js"]).service("Activity",l.default).component("dashboard",u.Dashboard).component("speedZones",i.SpeedZonesComponent).component("speedAvg",i.SpeedAverageComponent).component("countByZones",i.CountByZonesComponent);t.default=c},125:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.main=void 0,n(172);t.main={template:n(177),controller:function(){var e=this;this.isNavClosed=!1,this.onCloseBtn=function(t){t.preventDefault(),e.isNavClosed=!e.isNavClosed}}}},126:function(e,t,n){"use strict";function a(e,t,n){n.html5Mode(!0).hashPrefix("!"),t.otherwise("/"),e.state("root",{abstract:!0,component:"app"}).state("app",{url:"/",parent:"root",template:"<h1>Home Page</h1>"}).state("dashboard",{parent:"root",url:"/dashboard",component:"dashboard"}).state("news",{parent:"root",url:"/news",template:"<h1>News Page</h1>"}).state("board-brief",{parent:"root",url:"/board-brief",template:"<h1>Board Brief Page</h1>"}).state("briefcase",{parent:"root",url:"/briefcase",template:"<h1>Briefcase Page</h1>"})}a.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},171:function(e,t){},172:function(e,t){},173:function(e,t){e.exports='<div >\r\n  <canvas id="bar" class="chart chart-bar"\r\n    chart-data="$ctrl.chartData" chart-labels="$ctrl.labels" chart-options="$ctrl.options" height="75">\r\n  </canvas>\r\n  <h4 class="charts-not-visible">Charts is not visible, screen size is too small</h4>\r\n</div>\r\n'},174:function(e,t){e.exports='<div >\r\n    <canvas id="doughnut" class="chart chart-doughnut"\r\n    chart-data="$ctrl.chartData" chart-labels="$ctrl.labels" chart-options="$ctrl.options" height="200">\r\n  </canvas> \r\n  <h4 class="charts-not-visible">Charts is not visible, screen size is too small</h4>\r\n</div>\r\n'},175:function(e,t){e.exports='<div >\r\n    <canvas id="line" class="chart chart-line" chart-data="$ctrl.data"\r\n    chart-labels="$ctrl.labels" chart-series="$ctrl.series" chart-options="$ctrl.options"\r\n    chart-dataset-override="$ctrl.datasetOverride" height="75">\r\n    </canvas>\r\n    <h4 class="charts-not-visible">Charts is not visible, screen size is too small</h4>\r\n</div>'},176:function(e,t){e.exports='<div class="dashboard">\r\n    <speed-zones speeds="$ctrl.zonesSpeeds" class="analytics-chart chart-speed-zones"></speed-zones>\r\n    <count-by-zones counts="$ctrl.zoneCounts" class="analytics-chart chart-count-by-zones"></count-by-zones>\r\n    <speed-avg averages="$ctrl.speedAverages" class="analytics-chart chart-speed-avg"></speed-avg>\r\n</div>'},177:function(e,t){e.exports='<header class="header">\r\n    \x3c!-- <a ui-sref="app" class="header-logo"><img src="/assets/images/logo.png" /></a> --\x3e\r\n    <div class="user-settings">\r\n        <a href="#">\r\n            <span>Admin Name </span>\r\n            <i class="fa fa-gear"></i>\r\n        </a>\r\n    </div>\r\n</header>\r\n<nav class="main-navigation" ng-class="{\'navigation-is-closed\' : $ctrl.isNavClosed}">\r\n    <a ui-sref="app" class="nav-logo">\r\n        <i class="fa fa-lg fa-home"></i>\r\n        \x3c!-- <img src="/assets/images/logo.png" /> --\x3e\r\n    </a>\r\n    <h2 class="nav-title">Navigate</h2>\r\n    <ul class="nav-list">\r\n        <li class="nav-item">\r\n            <a ui-sref="dashboard">\r\n                <i class="fa fa-line-chart"></i>\r\n                <span>Analytics</span>\r\n            </a>\r\n        </li>\r\n        <li class="nav-item">\r\n            <a ui-sref="news">\r\n                <i class="fa fa-newspaper-o"></i>\r\n                <span>News</span>\r\n            </a>\r\n        </li>\r\n        <li class="nav-item">\r\n            <a ui-sref="board-brief">\r\n                <i class="fa fa-file-text-o"></i>\r\n                <span>Board Brief</span>\r\n            </a>\r\n        </li>\r\n        <li class="nav-item">\r\n            <a ui-sref="briefcase">\r\n                <i class="fa fa-briefcase"></i>\r\n                <span>Briefcase</span>\r\n            </a>\r\n        </li>\r\n        <li class="nav-item nav-close-item">\r\n            <a href="#" ng-click="$ctrl.onCloseBtn($event)">\r\n                <i class="fa " ng-class="{\'fa-angle-double-left\' : !$ctrl.isNavClosed, \'fa-angle-double-right\' : $ctrl.isNavClosed}"></i>\r\n                <span>Close Menu</span>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n</nav>\r\n<main class="main-content" ng-class="{\'navigation-is-closed\' : $ctrl.isNavClosed}">\r\n    <ui-view></ui-view>\r\n</main>\r\n'},179:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],a=!0,r=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(){a(this,e),this.labels=[],this.chartData=[[]],this.options=this.buildOptions()}return s(e,[{key:"$onChanges",value:function(){var e=this;this.labels=[],this.values=[],this.counts.forEach(function(t,n){e.labels.push(n+1),e.values.push(t.count)}),this.chartData=[this.values]}},{key:"buildOptions",value:function(){var e=this;return{responsive:!0,title:{display:!0,text:"Count By Zone",fontFamily:"'Open Sans', sans-serif",fontColor:"#7cb2ed"},legend:{display:!0,position:"right",labels:{boxWidth:0,fontFamily:"'Open Sans', sans-serif",fontSize:10,generateLabels:function(){return e.counts.map(function(e,t){return{text:t+1+": Zone "+e.zoneId}})}},onClick:null},scales:{yAxes:[{ticks:{suggestedMin:0,fontFamily:"'Open Sans', sans-serif",fontSize:10}}],xAxes:[{ticks:{fontFamily:"'Open Sans', sans-serif",fontSize:10}}]},tooltips:{titleFontFamily:"'Open Sans', sans-serif",bodyFontFamily:"'Open Sans', sans-serif",callbacks:{title:function(t){var n=r(t,1),a=n[0].index;if(e.counts){return"Zone: "+e.counts[a].zoneId}},label:function(e,t){var n=e.index;return"Count: "+r(t.datasets,1)[0].data[n]}}}}}}]),e}();t.CountByZonesComponent={template:n(173),bindings:{counts:"<"},controller:i}},180:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(182);Object.defineProperty(t,"SpeedZonesComponent",{enumerable:!0,get:function(){return a.SpeedZonesComponent}});var r=n(181);Object.defineProperty(t,"SpeedAverageComponent",{enumerable:!0,get:function(){return r.SpeedAverageComponent}});var s=n(179);Object.defineProperty(t,"CountByZonesComponent",{enumerable:!0,get:function(){return s.CountByZonesComponent}})},181:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function(){function e(){a(this,e),this.labels=[],this.chartData=[],this.options=this.buildOptions()}return r(e,[{key:"$onChanges",value:function(){var e=this;this.labels=[],this.chartData=[],this.averages.forEach(function(t){e.labels.push(t.zoneId),e.chartData.push(t.avg)})}},{key:"buildOptions",value:function(){return{responsive:!0,legend:{display:!0,position:"bottom",labels:{boxWidth:10,fontFamily:"'Open Sans', sans-serif",fontSize:9}},title:{display:!0,text:"Speed Average",fontFamily:"'Open Sans', sans-serif",fontColor:"#7cb2ed"},animation:{animateScale:!0,animateRotate:!0},tooltips:{titleFontFamily:"'Open Sans', sans-serif",bodyFontFamily:"'Open Sans', sans-serif"}}}}]),e}();t.SpeedAverageComponent={template:n(174),bindings:{averages:"<"},controller:s}},182:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function(){function e(){a(this,e),this.labels=[],this.series=[],this.data=[],this.datasetOverride=[],this.options=this.buildOptions()}return r(e,[{key:"$onInit",value:function(){var e=this;Object.keys(this.speeds.zones).forEach(function(t){e.series.push(t),e.datasetOverride.push({fill:!1,lineTension:0})})}},{key:"$onChanges",value:function(){this.labels=this.speeds.times.map(function(e){var t=new Date(e);return t.getHours()+": "+t.getMinutes()}),this.data=Object.values(this.speeds.zones)}},{key:"buildOptions",value:function(){return{responsive:!0,legend:{display:!0,position:"right",labels:{boxWidth:10,fontFamily:"'Open Sans', sans-serif",fontSize:10}},title:{display:!0,position:"top",text:"Speed Zones",fontFamily:"'Open Sans', sans-serif",fontColor:"#7cb2ed"},animation:{duration:1,easing:"linear"},tooltips:{titleFontFamily:"'Open Sans', sans-serif",bodyFontFamily:"'Open Sans', sans-serif"},scales:{yAxes:[{ticks:{suggestedMin:0,suggestedMax:100,callback:function(e){return e+"Km"},fontFamily:"'Open Sans', sans-serif",fontSize:10}}],xAxes:[{ticks:{fontFamily:"'Open Sans', sans-serif",fontSize:10}}]}}}}]),e}();t.SpeedZonesComponent={template:n(175),bindings:{speeds:"<"},controller:s}},183:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Dashboard=void 0;var r=function(){function e(e,t){var n=[],a=!0,r=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(171);var i=n(185),o=function(e){return e&&e.__esModule?e:{default:e}}(i),l=function(){function e(t,n,r){"ngInject";a(this,e),this.$log=t,this.Activity=n,this.$interval=r,this.speedAverages=[],this.zoneCounts=[],this.zonesSpeeds={zones:{},times:[]},this.zones={}}return e.$inject=["$log","Activity","$interval"],s(e,[{key:"$onInit",value:function(){this.startActivityUpdater()}},{key:"startActivityUpdater",value:function(){this.updateCharts(),this.$interval(this.updateCharts.bind(this),5e3)}},{key:"updateCharts",value:function(){var e=this;this.Activity.getNewData().forEach(function(t){var n=t.zoneId;e.zones[n]||(e.zones[n]=new o.default(n)),e.zones[n].addSpeed(t.data)}),this.updateSpeedAvgChartData(),this.updateCountByZoneChartData(),this.updateZonesSpeedChartData()}},{key:"updateSpeedAvgChartData",value:function(){this.speedAverages=Object.entries(this.zones).map(function(e){var t=r(e,2);return{zoneId:t[0],avg:t[1].speedAvg}})}},{key:"updateCountByZoneChartData",value:function(){this.zoneCounts=Object.entries(this.zones).map(function(e){var t=r(e,2);return{zoneId:t[0],count:t[1].totalCount}})}},{key:"updateZonesSpeedChartData",value:function(){var e={zones:{}};Object.entries(this.zones).forEach(function(t,n){var a=r(t,2),s=a[0],i=a[1];e.zones[s]=i.speeds,0===n&&(e.times=i.times)}),this.zonesSpeeds=e}}]),e}();t.Dashboard={template:n(176),controller:l}},184:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){return(new Date).getTime()}function s(){return 1+Math.floor(5*Math.random())}function i(e){if(angular.isUndefined(e))return Math.floor(100*Math.random()*100)/100;var t=Math.floor(10*Math.random()*100)/100,n=e+Math.pow(-1,Math.round(Math.random()))*t;return n=n>100?100:n<0?0:n}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=["Calle 85","Salitre plaza","Parque 93","Calle 80","Centro"],u={},c=function(){function e(){a(this,e)}return o(e,[{key:"getNewData",value:function(){return l.map(function(e){return u[e]=i(u[e]),{zoneId:e,data:{count:s(),speed:u[e],time:r()}}})}}]),e}();t.default=c},185:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=function(){function e(t){a(this,e),this.name=t,this.totalCount=0,this.speedSum=0,this.updateData=[],this.times=[],this.speeds=[],this.lastUpdate=null}return r(e,[{key:"addSpeed",value:function(e){var t=e.count,n=e.speed,a=e.time;this.totalCount+=t,this.speedSum+=n,this.updateData.push({count:t,speed:n,time:a}),this.times.push(a),this.speeds.push(n),this.lastUpdate={count:t,speed:n,time:a}}},{key:"speedAvg",get:function(){var e=this.speedSum/this.updateData.length;return Math.floor(100*e)/100}}]),e}();t.default=s},186:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.app=void 0;var r=n(1),s=a(r),i=n(125);n(2),n(3),n(124);var o=n(126),l=a(o);n(123);var u=t.app="app";s.default.module(u,["ui.router","app.dashboard"]).config(l.default).component("app",i.main)}},[186]);